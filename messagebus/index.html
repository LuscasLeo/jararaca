
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../websocket/" rel="prev"/>
<link href="../scheduler/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name="generator"/>
<title>Message Bus - Jararaca Framework</title>
<link href="../assets/stylesheets/main.484c7ddc.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style>
<link href="../stylesheets/custom.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="amber" data-md-color-primary="deep-purple" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#jararaca-message-bus-architecture">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Jararaca Framework" class="md-header__button md-logo" data-md-component="logo" href=".." title="Jararaca Framework">
<img alt="logo" src="../assets/_f04774c9-7e05-4da4-8b17-8be23f6a1475.jpeg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Jararaca Framework
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Message Bus
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="amber" data-md-color-media="" data-md-color-primary="deep-purple" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="amber" data-md-color-media="" data-md-color-primary="deep-purple" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/LuscasLeo/jararaca" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    LuscasLeo/jararaca
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="..">
        
  
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../example-app/">
        
  
  
    
  
  Example App

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../architecture/">
        
  
  
    
  
  Architecture

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../http-middleware/">
          
  
  
  HTTP

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../websocket/">
        
  
  
    
  
  WebSocket

      </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="./">
        
  
  
    
  
  Message Bus

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../scheduler/">
        
  
  
    
  
  Scheduler

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../persistence/">
          
  
  
  Database

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../typescript-generation/">
          
  
  
  TypeScript

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../interceptors/">
          
  
  
  Features

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../observability/">
        
  
  
    
  
  Observability

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../testing/">
        
  
  
    
  
  Testing

      </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Jararaca Framework" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Jararaca Framework">
<img alt="logo" src="../assets/_f04774c9-7e05-4da4-8b17-8be23f6a1475.jpeg"/>
</a>
    Jararaca Framework
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/LuscasLeo/jararaca" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    LuscasLeo/jararaca
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
<span class="md-ellipsis">
    
  
    Home
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../example-app/">
<span class="md-ellipsis">
    
  
    Example App
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../architecture/">
<span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    HTTP
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    HTTP
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../http-middleware/">
<span class="md-ellipsis">
    
  
    Middleware
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../http-rpc/">
<span class="md-ellipsis">
    
  
    HTTP RPC
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../websocket/">
<span class="md-ellipsis">
    
  
    WebSocket
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    
  
    Message Bus
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    
  
    Message Bus
  

    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      
        Overview
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#message-structure">
<span class="md-ellipsis">
      
        Message Structure
      
    </span>
</a>
<nav aria-label="Message Structure" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#message-types-tasks-vs-events">
<span class="md-ellipsis">
      
        Message Types: Tasks vs Events
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#base-message-class">
<span class="md-ellipsis">
      
        Base Message Class
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-message-definition">
<span class="md-ellipsis">
      
        Example Message Definition
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#message-processing-flow">
<span class="md-ellipsis">
      
        Message Processing Flow
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#message-routing-exchanges-and-queues">
<span class="md-ellipsis">
      
        Message Routing: Exchanges and Queues
      
    </span>
</a>
<nav aria-label="Message Routing: Exchanges and Queues" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#exchange-and-queue-structure-example">
<span class="md-ellipsis">
      
        Exchange and Queue Structure Example
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-message-routing-works">
<span class="md-ellipsis">
      
        How Message Routing Works
      
    </span>
</a>
<nav aria-label="How Message Routing Works" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#key-concepts">
<span class="md-ellipsis">
      
        Key Concepts:
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-queue-binding-configuration">
<span class="md-ellipsis">
      
        Example Queue Binding Configuration
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#worker-infrastructure">
<span class="md-ellipsis">
      
        Worker Infrastructure
      
    </span>
</a>
<nav aria-label="Worker Infrastructure" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#worker-initialization-process">
<span class="md-ellipsis">
      
        Worker Initialization Process
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#message-consumption-process">
<span class="md-ellipsis">
      
        Message Consumption Process
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#handler-registration">
<span class="md-ellipsis">
      
        Handler Registration
      
    </span>
</a>
<nav aria-label="Handler Registration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#example-handler-definition">
<span class="md-ellipsis">
      
        Example Handler Definition
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#message-control-flow">
<span class="md-ellipsis">
      
        Message Control Flow
      
    </span>
</a>
<nav aria-label="Message Control Flow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#message-control-utilities">
<span class="md-ellipsis">
      
        Message Control Utilities
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-handling">
<span class="md-ellipsis">
      
        Error Handling
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#integration-with-other-jararaca-components">
<span class="md-ellipsis">
      
        Integration with Other Jararaca Components
      
    </span>
</a>
<nav aria-label="Integration with Other Jararaca Components" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#websocket-integration-example">
<span class="md-ellipsis">
      
        WebSocket Integration Example
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#command-line-usage">
<span class="md-ellipsis">
      
        Command Line Usage
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#environment-variable-configuration">
<span class="md-ellipsis">
      
        Environment Variable Configuration
      
    </span>
</a>
<nav aria-label="Environment Variable Configuration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#message-handler-default-values">
<span class="md-ellipsis">
      
        Message Handler Default Values
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#usage-example">
<span class="md-ellipsis">
      
        Usage Example
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#per-handler-override">
<span class="md-ellipsis">
      
        Per-Handler Override
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#conclusion">
<span class="md-ellipsis">
      
        Conclusion
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../scheduler/">
<span class="md-ellipsis">
    
  
    Scheduler
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Database
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            
  
    Database
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../persistence/">
<span class="md-ellipsis">
    
  
    Persistence
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    
  
    TypeScript
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            
  
    TypeScript
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../typescript-generation/">
<span class="md-ellipsis">
    
  
    Generation
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../expose-type/">
<span class="md-ellipsis">
    
  
    Expose Type
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Features
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            
  
    Features
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../interceptors/">
<span class="md-ellipsis">
    
  
    Interceptors
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../metadata/">
<span class="md-ellipsis">
    
  
    Metadata
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../retry/">
<span class="md-ellipsis">
    
  
    Retry
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../observability/">
<span class="md-ellipsis">
    
  
    Observability
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../testing/">
<span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="jararaca-message-bus-architecture">Jararaca Message Bus Architecture</h1>
<p>The message bus system in Jararaca provides a robust infrastructure for asynchronous message processing using a publisher-consumer pattern. This document explains how the message bus works, from message definition to processing flows.</p>
<h2 id="overview">Overview</h2>
<p>The message bus system consists of several key components that work together to provide a seamless experience for defining, publishing, and consuming messages.</p>
<pre class="mermaid"><code>graph TB
    subgraph "Message Definition"
        Message[Message]
        MessageOf[MessageOf]
    end

    subgraph "Message Handling"
        MessageHandler[MessageHandler]
        MessageBusController[MessageBusController]
        BusMessageController[BusMessageController]
    end

    subgraph "Worker Infrastructure"
        MessageBusWorker[MessageBusWorker]
        AioPikaMicroserviceConsumer[AioPikaMicroserviceConsumer]
        MessageHandlerCallback[MessageHandlerCallback]
    end

    subgraph "Utilities"
        ack[ack]
        nack[nack]
        retry[retry]
        retry_later[retry_later]
        reject[reject]
    end

    Message --&gt; MessageOf
    MessageHandler --&gt; MessageBusController
    MessageBusController --&gt; MessageBusWorker
    MessageBusWorker --&gt; AioPikaMicroserviceConsumer
    AioPikaMicroserviceConsumer --&gt; MessageHandlerCallback
    MessageHandlerCallback --&gt; BusMessageController
    BusMessageController --&gt; ack
    BusMessageController --&gt; nack
    BusMessageController --&gt; reject
    BusMessageController --&gt; retry
    BusMessageController --&gt; retry_later
</code></pre>
<h2 id="message-structure">Message Structure</h2>
<p>Messages in Jararaca are built on Pydantic models, which provide type validation and serialization capabilities.</p>
<h3 id="message-types-tasks-vs-events">Message Types: Tasks vs Events</h3>
<p>Jararaca supports two fundamental message types:</p>
<ul>
<li>
<p><strong>Tasks</strong>: Designed to be handled exactly once by a single MessageHandler. It is not recommended to have multiple MessageHandlers listening to the same Task type. Tasks represent commands or operations that should be executed once.</p>
</li>
<li>
<p><strong>Events</strong>: Can be listened to by multiple parts of the application. Events are ideal for scenarios where different components need to react to the same occurrence, providing looser coupling throughout the codebase.</p>
</li>
</ul>
<pre class="mermaid"><code>graph LR
    Task[Task Message] --&gt; Handler1[Single Handler]
    Event[Event Message] --&gt; HandlerA[Handler A]
    Event --&gt; HandlerB[Handler B]
    Event --&gt; HandlerC[Handler C]
</code></pre>
<p>When designing your message architecture, consider:</p>
<ul>
<li>Use Tasks when an operation should be performed exactly once</li>
<li>Use Events when multiple systems need to react to the same occurrence</li>
<li>Events promote better decoupling between components</li>
</ul>
<h3 id="base-message-class">Base Message Class</h3>
<pre class="mermaid"><code>classDiagram
    class Message {
        +MESSAGE_TOPIC: ClassVar[str]
        +MESSAGE_TYPE: ClassVar[Literal["task", "event"]]
        +publish() async
    }
    class BaseModel {
        +model_validate_json()
        +json()
    }
    class UserCreatedMessage {
        +MESSAGE_TOPIC: "user.created"
        +MESSAGE_TYPE: "event"
        +user_id: str
        +username: str
        +email: str
    }
    BaseModel &lt;|-- Message
    Message &lt;|-- UserCreatedMessage
</code></pre>
<h3 id="example-message-definition">Example Message Definition</h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">jararaca</span><span class="w"> </span><span class="kn">import</span> <span class="n">Message</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">UserCreatedMessage</span><span class="p">(</span><span class="n">Message</span><span class="p">):</span>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>    <span class="n">MESSAGE_TOPIC</span> <span class="o">=</span> <span class="s2">"user.created"</span>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>    <span class="n">MESSAGE_TYPE</span> <span class="o">=</span> <span class="s2">"event"</span>  <span class="c1"># or "task"</span>
</span><span id="__span-0-7"><a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>
</span><span id="__span-0-8"><a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="n">user_id</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-0-9"><a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>    <span class="n">username</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-0-10"><a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span>
</span></code></pre></div>
<h2 id="message-processing-flow">Message Processing Flow</h2>
<p>When a message is published, it goes through several processing stages before being handled by the appropriate consumer.</p>
<pre class="mermaid"><code>sequenceDiagram
    participant P as Publisher
    participant E as Exchange (RabbitMQ)
    participant Q as Queue
    participant W as MessageBusWorker
    participant C as Consumer (Handler)

    P-&gt;&gt;E: publish(message, topic)
    E-&gt;&gt;Q: route message by topic
    W-&gt;&gt;Q: consume messages
    Q-&gt;&gt;W: deliver message
    W-&gt;&gt;C: invoke message handler
    C-&gt;&gt;W: process &amp; acknowledge
</code></pre>
<h2 id="message-routing-exchanges-and-queues">Message Routing: Exchanges and Queues</h2>
<p>Jararaca's message bus system leverages RabbitMQ's exchange and queue architecture to efficiently route messages between publishers and consumers.</p>
<h3 id="exchange-and-queue-structure-example">Exchange and Queue Structure Example</h3>
<p>The following diagram illustrates how the exchange and queue system works in a typical Jararaca application:</p>
<pre class="mermaid"><code>graph LR
    subgraph Publishers
        P1[UserService]
        P2[OrderService]
        P3[NotificationService]
    end

    subgraph "Exchange (jararaca_ex)"
        E[Topic Exchange]
    end

    subgraph Queues
        Q1[user_service_queue]
        Q2[order_service_queue]
        Q3[notification_service_queue]
        Q4[analytics_service_queue]
    end

    subgraph Consumers
        C1[UserServiceHandler]
        C2[OrderServiceHandler]
        C3[NotificationServiceHandler]
        C4[AnalyticsServiceHandler]
    end

    P1 --&gt;|user.created| E
    P1 --&gt;|user.updated| E
    P2 --&gt;|order.created| E
    P2 --&gt;|order.updated| E
    P3 --&gt;|notification.sent| E

    E --&gt;|user.created| Q1
    E --&gt;|user.updated| Q1
    E --&gt;|order.created| Q2
    E --&gt;|order.updated| Q2
    E --&gt;|notification.sent| Q3

    %% Events can be routed to multiple queues
    E --&gt;|user.created| Q4
    E --&gt;|order.created| Q4

    Q1 --&gt; C1
    Q2 --&gt; C2
    Q3 --&gt; C3
    Q4 --&gt; C4

    style E fill:#f96,stroke:#333,stroke-width:2px
    style Q1 fill:#9cf,stroke:#333,stroke-width:1px
    style Q2 fill:#9cf,stroke:#333,stroke-width:1px
    style Q3 fill:#9cf,stroke:#333,stroke-width:1px
    style Q4 fill:#9cf,stroke:#333,stroke-width:1px
</code></pre>
<h3 id="how-message-routing-works">How Message Routing Works</h3>
<ol>
<li><strong>Publishers</strong> send messages to the exchange with a specific topic (e.g., <code>user.created</code>, <code>order.updated</code>).</li>
<li>The <strong>Exchange</strong> routes these messages to queues based on binding patterns.</li>
<li><strong>Queues</strong> hold messages until they are consumed.</li>
<li><strong>Consumers</strong> process messages from their assigned queues.</li>
</ol>
<h4 id="key-concepts">Key Concepts:</h4>
<ul>
<li><strong>Topic-based routing</strong>: Messages are routed based on their topic (e.g., <code>user.created</code>)</li>
<li><strong>Multiple bindings</strong>: A single exchange can route to multiple queues (especially useful for event messages)</li>
<li><strong>Service isolation</strong>: Each service typically has its own queue</li>
<li><strong>Message persistence</strong>: Messages remain in queues until processed, even if consumers are temporarily unavailable</li>
</ul>
<h4 id="example-queue-binding-configuration">Example Queue Binding Configuration</h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">jararaca</span><span class="w"> </span><span class="kn">import</span> <span class="n">MessageBusController</span><span class="p">,</span> <span class="n">MessageHandler</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="c1"># AioPikaWorkerConfig is not exported by jararaca, so we import it from the module</span>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">jararaca.messagebus.worker</span><span class="w"> </span><span class="kn">import</span> <span class="n">AioPikaWorkerConfig</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="c1"># Define worker configuration with queue binding patterns</span>
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="n">worker_config</span> <span class="o">=</span> <span class="n">AioPikaWorkerConfig</span><span class="p">(</span>
</span><span id="__span-1-8"><a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a>    <span class="n">url</span><span class="o">=</span><span class="s2">"amqp://guest:guest@localhost/"</span><span class="p">,</span>
</span><span id="__span-1-9"><a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a>    <span class="n">exchange</span><span class="o">=</span><span class="s2">"jararaca_ex"</span><span class="p">,</span>
</span><span id="__span-1-10"><a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a>    <span class="n">queue</span><span class="o">=</span><span class="s2">"user_service_queue"</span><span class="p">,</span>
</span><span id="__span-1-11"><a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a>    <span class="n">binding_keys</span><span class="o">=</span><span class="p">[</span><span class="s2">"user.*"</span><span class="p">,</span> <span class="s2">"notification.user.*"</span><span class="p">]</span>  <span class="c1"># This queue receives all user-related topics</span>
</span><span id="__span-1-12"><a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="p">)</span>
</span></code></pre></div>
<p>This message routing architecture allows for flexible and scalable communication patterns between different parts of your application, supporting both direct task assignment and broad event publishing.</p>
<h2 id="worker-infrastructure">Worker Infrastructure</h2>
<p>The MessageBusWorker is the central piece that orchestrates message consumption and processing.</p>
<pre class="mermaid"><code>classDiagram
    class MessageBusWorker {
        -app: Microservice
        -config: AioPikaWorkerConfig
        -container: Container
        -lifecycle: AppLifecycle
        -uow_context_provider: UnitOfWorkContextProvider
        -_consumer: AioPikaMicroserviceConsumer
        +start_async()
        +start_sync()
    }

    class AioPikaMicroserviceConsumer {
        -config: AioPikaWorkerConfig
        -message_handler_set: Set[MessageHandlerData]
        -incoming_map: Dict[str, MessageHandlerData]
        -uow_context_provider: UnitOfWorkContextProvider
        -shutdown_event: Event
        -lock: Lock
        -tasks: Set[Task]
        +consume()
        +wait_all_tasks_done()
    }

    class MessageHandlerCallback {
        -consumer: AioPikaMicroserviceConsumer
        -queue_name: str
        -routing_key: str
        -message_handler: MessageHandlerData
        +message_consumer()
        +handle_message_consume_done()
        +handle_reject_message()
        +handle_message()
    }

    MessageBusWorker --&gt; AioPikaMicroserviceConsumer
    AioPikaMicroserviceConsumer --&gt; MessageHandlerCallback
</code></pre>
<h3 id="worker-initialization-process">Worker Initialization Process</h3>
<pre class="mermaid"><code>flowchart TD
    A[MessageBusWorker Initialization] --&gt; B[Load App Controllers]
    B --&gt; C[Find MessageBusControllers]
    C --&gt; D[Extract Message Handlers]
    D --&gt; E[Create AioPikaMicroserviceConsumer]
    E --&gt; F[Connect to RabbitMQ]
    F --&gt; G[Declare Exchanges &amp; Queues]
    G --&gt; H[Bind Queues to Topics]
    H --&gt; I[Start Consuming Messages]
</code></pre>
<h3 id="message-consumption-process">Message Consumption Process</h3>
<pre class="mermaid"><code>flowchart TD
    A[Message Received] --&gt; B[Create Task for Message]
    B --&gt; C[Extract Message Type]
    C --&gt; D[Deserialize Message]
    D --&gt; E[Create MessageBusAppContext]
    E --&gt; F[Setup BusMessageController]
    F --&gt; G[Invoke Handler Function]
    G --&gt;|Success| H[Acknowledge Message]
    G --&gt;|Failure| I[Handle Exception]
    I --&gt;|Retry| J[Requeue Message]
    I --&gt;|Discard| K[Reject Message]
</code></pre>
<h2 id="handler-registration">Handler Registration</h2>
<p>Jararaca uses a declarative approach to register message handlers through decorators.</p>
<pre class="mermaid"><code>classDiagram
    class MessageBusController {
        -messagebus_factory: Callable
        +get_messagebus_factory()
        +register()
        +get_messagebus()
    }

    class MessageHandler {
        -message_type: Type[Message]
        -timeout: Optional[int]
        -exception_handler: Optional[Callable]
        -requeue_on_exception: bool
        -auto_ack: bool
        +register()
        +get_message_incoming()
    }

    class MessageHandlerData {
        +message_type: Type[Message]
        +spec: MessageHandler
        +callable: Callable
    }

    MessageBusController --&gt; MessageHandler
    MessageHandler --&gt; MessageHandlerData
</code></pre>
<h3 id="example-handler-definition">Example Handler Definition</h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">jararaca</span><span class="w"> </span><span class="kn">import</span> <span class="n">Message</span><span class="p">,</span> <span class="n">MessageBusController</span><span class="p">,</span> <span class="n">MessageHandler</span><span class="p">,</span> <span class="n">MessageOf</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="nd">@MessageBusController</span><span class="p">()</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="k">class</span><span class="w"> </span><span class="nc">UserEventsController</span><span class="p">:</span>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a>    <span class="nd">@MessageHandler</span><span class="p">(</span><span class="n">UserCreatedMessage</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">nack_on_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-2-7"><a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_user_created</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">MessageOf</span><span class="p">[</span><span class="n">UserCreatedMessage</span><span class="p">]):</span>
</span><span id="__span-2-8"><a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a>        <span class="n">user_data</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">payload</span><span class="p">()</span>
</span><span id="__span-2-9"><a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a>        <span class="c1"># Process the message</span>
</span><span id="__span-2-10"><a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"User created: </span><span class="si">{</span><span class="n">user_data</span><span class="o">.</span><span class="n">username</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="message-control-flow">Message Control Flow</h2>
<p>During message processing, handlers can control the message acknowledgment flow.</p>
<pre class="mermaid"><code>sequenceDiagram
    participant H as Handler
    participant C as BusMessageController
    participant Q as Queue

    H-&gt;&gt;C: ack()
    C-&gt;&gt;Q: Acknowledge Message

    H-&gt;&gt;C: nack()
    C-&gt;&gt;Q: Negative Acknowledge

    H-&gt;&gt;C: reject()
    C-&gt;&gt;Q: Reject Message

    H-&gt;&gt;C: retry()
    C-&gt;&gt;Q: Requeue Message
</code></pre>
<h3 id="message-control-utilities">Message Control Utilities</h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">jararaca</span><span class="w"> </span><span class="kn">import</span> <span class="n">ack</span><span class="p">,</span> <span class="n">nack</span><span class="p">,</span> <span class="n">reject</span><span class="p">,</span> <span class="n">retry</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="nd">@MessageBusController</span><span class="p">()</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="k">class</span><span class="w"> </span><span class="nc">TaskProcessor</span><span class="p">:</span>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a>    <span class="nd">@MessageHandler</span><span class="p">(</span><span class="n">TaskMessage</span><span class="p">,</span> <span class="n">auto_ack</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">MessageOf</span><span class="p">[</span><span class="n">TaskMessage</span><span class="p">]):</span>
</span><span id="__span-3-8"><a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-3-9"><a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a>            <span class="n">task_data</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">payload</span><span class="p">()</span>
</span><span id="__span-3-10"><a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a>            <span class="c1"># Process the task</span>
</span><span id="__span-3-11"><a href="#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a>            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_task_data</span><span class="p">(</span><span class="n">task_data</span><span class="p">)</span>
</span><span id="__span-3-12"><a href="#__codelineno-3-12" id="__codelineno-3-12" name="__codelineno-3-12"></a>            <span class="c1"># Manually acknowledge successful processing</span>
</span><span id="__span-3-13"><a href="#__codelineno-3-13" id="__codelineno-3-13" name="__codelineno-3-13"></a>            <span class="k">await</span> <span class="n">ack</span><span class="p">()</span>
</span><span id="__span-3-14"><a href="#__codelineno-3-14" id="__codelineno-3-14" name="__codelineno-3-14"></a>        <span class="k">except</span> <span class="n">TemporaryError</span><span class="p">:</span>
</span><span id="__span-3-15"><a href="#__codelineno-3-15" id="__codelineno-3-15" name="__codelineno-3-15"></a>            <span class="c1"># Request message retry</span>
</span><span id="__span-3-16"><a href="#__codelineno-3-16" id="__codelineno-3-16" name="__codelineno-3-16"></a>            <span class="k">await</span> <span class="n">retry</span><span class="p">()</span>
</span><span id="__span-3-17"><a href="#__codelineno-3-17" id="__codelineno-3-17" name="__codelineno-3-17"></a>        <span class="k">except</span> <span class="n">PermanentError</span><span class="p">:</span>
</span><span id="__span-3-18"><a href="#__codelineno-3-18" id="__codelineno-3-18" name="__codelineno-3-18"></a>            <span class="c1"># Reject the message</span>
</span><span id="__span-3-19"><a href="#__codelineno-3-19" id="__codelineno-3-19" name="__codelineno-3-19"></a>            <span class="k">await</span> <span class="n">reject</span><span class="p">()</span>
</span></code></pre></div>
<h2 id="error-handling">Error Handling</h2>
<p>The message bus provides comprehensive error handling mechanisms:</p>
<pre class="mermaid"><code>flowchart TD
    A[Message Processing] --&gt;|Success| B[Acknowledge]
    A --&gt;|Failure| C[Exception Handling]
    C --&gt;|Has Exception Handler| D[Custom Handler]
    C --&gt;|No Exception Handler| E[Default Logging]
    D --&gt;|Requeue Configured| F[Retry Message]
    D --&gt;|Discard Configured| G[Reject Message]
    E --&gt;|Requeue Configured| F
    E --&gt;|Discard Configured| G
</code></pre>
<h2 id="integration-with-other-jararaca-components">Integration with Other Jararaca Components</h2>
<p>The message bus system integrates with other Jararaca components for a unified experience:</p>
<pre class="mermaid"><code>flowchart LR
    A[Message Bus] &lt;--&gt; B[Database Sessions]
    A &lt;--&gt; C[WebSockets]
    A &lt;--&gt; D[Scheduler]
    A &lt;--&gt; E[HTTP API]

    B &lt;-- use_session --&gt; F[Shared Context]
    C &lt;-- use_ws_manager --&gt; F
    A &lt;-- use_publisher --&gt; F
</code></pre>
<h3 id="websocket-integration-example">WebSocket Integration Example</h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="nd">@MessageBusController</span><span class="p">()</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">NotificationController</span><span class="p">:</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>    <span class="nd">@MessageHandler</span><span class="p">(</span><span class="n">UserActivityMessage</span><span class="p">)</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_user_activity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">MessageOf</span><span class="p">[</span><span class="n">UserActivityMessage</span><span class="p">]):</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>        <span class="n">user_data</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">payload</span><span class="p">()</span>
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a>
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a>        <span class="c1"># Create a WebSocket message</span>
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a>        <span class="n">notification</span> <span class="o">=</span> <span class="n">ActivityNotification</span><span class="p">(</span>
</span><span id="__span-4-9"><a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a>            <span class="n">user_id</span><span class="o">=</span><span class="n">user_data</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
</span><span id="__span-4-10"><a href="#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a>            <span class="n">action</span><span class="o">=</span><span class="n">user_data</span><span class="o">.</span><span class="n">action</span><span class="p">,</span>
</span><span id="__span-4-11"><a href="#__codelineno-4-11" id="__codelineno-4-11" name="__codelineno-4-11"></a>            <span class="n">timestamp</span><span class="o">=</span><span class="n">user_data</span><span class="o">.</span><span class="n">timestamp</span>
</span><span id="__span-4-12"><a href="#__codelineno-4-12" id="__codelineno-4-12" name="__codelineno-4-12"></a>        <span class="p">)</span>
</span><span id="__span-4-13"><a href="#__codelineno-4-13" id="__codelineno-4-13" name="__codelineno-4-13"></a>
</span><span id="__span-4-14"><a href="#__codelineno-4-14" id="__codelineno-4-14" name="__codelineno-4-14"></a>        <span class="c1"># Send to user's room using WebSocket</span>
</span><span id="__span-4-15"><a href="#__codelineno-4-15" id="__codelineno-4-15" name="__codelineno-4-15"></a>        <span class="k">await</span> <span class="n">notification</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s2">"user-</span><span class="si">{</span><span class="n">user_data</span><span class="o">.</span><span class="n">user_id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="command-line-usage">Command Line Usage</h2>
<p>You can start a message bus worker using the Jararaca CLI:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>jararaca<span class="w"> </span>worker<span class="w"> </span>APP_PATH<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span>
</span></code></pre></div>
<p>Options:</p>
<ul>
<li><code>--broker-url</code>: The URL for the message broker (required) [env: BROKER_URL]</li>
<li><code>--backend-url</code>: The URL for the message broker backend (required) [env: BACKEND_URL]</li>
<li><code>--handlers</code>: Comma-separated list of handler names to listen to (optional) [env: HANDLERS]</li>
<li><code>--reload</code>: Enable auto-reload when Python files change (for development) [env: RELOAD]</li>
<li><code>--src-dir</code>: The source directory to watch for changes when --reload is enabled (default: "src") [env: SRC_DIR]</li>
</ul>
<p>Examples:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1"># Standard worker execution</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>jararaca<span class="w"> </span>worker<span class="w"> </span>myapp.main:app<span class="w"> </span>--broker-url<span class="w"> </span><span class="s2">"amqp://guest:guest@localhost:5672/?exchange=jararaca"</span><span class="w"> </span>--backend-url<span class="w"> </span><span class="s2">"redis://localhost:6379"</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="c1"># With auto-reload for development</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>jararaca<span class="w"> </span>worker<span class="w"> </span>myapp.main:app<span class="w"> </span>--broker-url<span class="w"> </span><span class="s2">"amqp://guest:guest@localhost:5672/?exchange=jararaca"</span><span class="w"> </span>--backend-url<span class="w"> </span><span class="s2">"redis://localhost:6379"</span><span class="w"> </span>--reload
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="c1"># Using environment variables</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="nb">export</span><span class="w"> </span><span class="nv">APP_PATH</span><span class="o">=</span><span class="s2">"myapp.main:app"</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="nb">export</span><span class="w"> </span><span class="nv">BROKER_URL</span><span class="o">=</span><span class="s2">"amqp://guest:guest@localhost:5672/?exchange=jararaca"</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="nb">export</span><span class="w"> </span><span class="nv">BACKEND_URL</span><span class="o">=</span><span class="s2">"redis://localhost:6379"</span>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="nb">export</span><span class="w"> </span><span class="nv">RELOAD</span><span class="o">=</span><span class="s2">"true"</span>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="nb">export</span><span class="w"> </span><span class="nv">SRC_DIR</span><span class="o">=</span><span class="s2">"src"</span>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="nb">export</span><span class="w"> </span><span class="nv">RELOAD</span><span class="o">=</span><span class="s2">"true"</span>
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a>jararaca<span class="w"> </span>worker
</span></code></pre></div>
<h2 id="environment-variable-configuration">Environment Variable Configuration</h2>
<p>Jararaca allows you to configure default values for message handlers through environment variables. This is useful for setting global defaults across your application without modifying code.</p>
<h3 id="message-handler-default-values">Message Handler Default Values</h3>
<p>The following environment variables control the default behavior of <code>@MessageHandler</code> decorated functions:</p>
<table>
<thead>
<tr>
<th>Environment Variable</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>JARARACA_MESSAGEBUS_HANDLER_TIMEOUT</code></td>
<td><code>int</code></td>
<td><code>30</code></td>
<td>Default timeout in seconds for message handler execution. Set to <code>0</code> or empty to disable timeout (returns <code>None</code>).</td>
</tr>
<tr>
<td><code>JARARACA_MESSAGEBUS_NACK_ON_EXCEPTION</code></td>
<td><code>bool</code></td>
<td><code>false</code></td>
<td>Whether to send a negative acknowledgment (NACK) when an exception occurs during message processing. Truthy values: <code>1</code>, <code>true</code>, <code>yes</code>, <code>on</code>.</td>
</tr>
<tr>
<td><code>JARARACA_MESSAGEBUS_AUTO_ACK</code></td>
<td><code>bool</code></td>
<td><code>false</code></td>
<td>Whether to automatically acknowledge messages after successful processing. Truthy values: <code>1</code>, <code>true</code>, <code>yes</code>, <code>on</code>.</td>
</tr>
<tr>
<td><code>JARARACA_MESSAGEBUS_NACK_DELAY_ON_EXCEPTION</code></td>
<td><code>float</code></td>
<td><code>5.0</code></td>
<td>Delay in seconds before sending a NACK when an exception occurs. Set to <code>0</code> or empty to use default of <code>5.0</code>.</td>
</tr>
</tbody>
</table>
<h3 id="usage-example">Usage Example</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="c1"># Set global defaults for all message handlers</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">JARARACA_MESSAGEBUS_HANDLER_TIMEOUT</span><span class="o">=</span><span class="m">60</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="nb">export</span><span class="w"> </span><span class="nv">JARARACA_MESSAGEBUS_NACK_ON_EXCEPTION</span><span class="o">=</span><span class="nb">true</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="nb">export</span><span class="w"> </span><span class="nv">JARARACA_MESSAGEBUS_AUTO_ACK</span><span class="o">=</span><span class="nb">true</span>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="nb">export</span><span class="w"> </span><span class="nv">JARARACA_MESSAGEBUS_NACK_DELAY_ON_EXCEPTION</span><span class="o">=</span><span class="m">10</span>.0
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="c1"># Start the worker</span>
</span><span id="__span-7-8"><a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a>jararaca<span class="w"> </span>worker<span class="w"> </span>myapp.main:app<span class="w"> </span>--broker-url<span class="w"> </span><span class="s2">"amqp://..."</span><span class="w"> </span>--backend-url<span class="w"> </span><span class="s2">"redis://..."</span>
</span></code></pre></div>
<h3 id="per-handler-override">Per-Handler Override</h3>
<p>Environment variable defaults can be overridden on a per-handler basis by explicitly setting the parameters in the <code>@MessageHandler</code> decorator:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">jararaca</span><span class="w"> </span><span class="kn">import</span> <span class="n">MessageBusController</span><span class="p">,</span> <span class="n">MessageHandler</span><span class="p">,</span> <span class="n">MessageOf</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="nd">@MessageBusController</span><span class="p">()</span>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="k">class</span><span class="w"> </span><span class="nc">MyController</span><span class="p">:</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a>    <span class="c1"># Uses environment variable defaults</span>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a>    <span class="nd">@MessageHandler</span><span class="p">(</span><span class="n">MyMessage</span><span class="p">)</span>
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handler_with_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">MessageOf</span><span class="p">[</span><span class="n">MyMessage</span><span class="p">]):</span>
</span><span id="__span-8-9"><a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a>        <span class="o">...</span>
</span><span id="__span-8-10"><a href="#__codelineno-8-10" id="__codelineno-8-10" name="__codelineno-8-10"></a>
</span><span id="__span-8-11"><a href="#__codelineno-8-11" id="__codelineno-8-11" name="__codelineno-8-11"></a>    <span class="c1"># Overrides environment variable defaults</span>
</span><span id="__span-8-12"><a href="#__codelineno-8-12" id="__codelineno-8-12" name="__codelineno-8-12"></a>    <span class="nd">@MessageHandler</span><span class="p">(</span>
</span><span id="__span-8-13"><a href="#__codelineno-8-13" id="__codelineno-8-13" name="__codelineno-8-13"></a>        <span class="n">MyMessage</span><span class="p">,</span>
</span><span id="__span-8-14"><a href="#__codelineno-8-14" id="__codelineno-8-14" name="__codelineno-8-14"></a>        <span class="n">timeout</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span>
</span><span id="__span-8-15"><a href="#__codelineno-8-15" id="__codelineno-8-15" name="__codelineno-8-15"></a>        <span class="n">nack_on_exception</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="__span-8-16"><a href="#__codelineno-8-16" id="__codelineno-8-16" name="__codelineno-8-16"></a>        <span class="n">auto_ack</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-8-17"><a href="#__codelineno-8-17" id="__codelineno-8-17" name="__codelineno-8-17"></a>        <span class="n">nack_delay_on_exception</span><span class="o">=</span><span class="mf">2.0</span>
</span><span id="__span-8-18"><a href="#__codelineno-8-18" id="__codelineno-8-18" name="__codelineno-8-18"></a>    <span class="p">)</span>
</span><span id="__span-8-19"><a href="#__codelineno-8-19" id="__codelineno-8-19" name="__codelineno-8-19"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handler_with_custom_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">MessageOf</span><span class="p">[</span><span class="n">MyMessage</span><span class="p">]):</span>
</span><span id="__span-8-20"><a href="#__codelineno-8-20" id="__codelineno-8-20" name="__codelineno-8-20"></a>        <span class="o">...</span>
</span></code></pre></div>
<h2 id="conclusion">Conclusion</h2>
<p>The Jararaca message bus system provides a powerful, type-safe way to implement asynchronous processing in your applications. With its integration with other Jararaca components, it enables building distributed systems with unified context and utilities across different runtime environments.</p>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Documentation Made with help of AI and Poorly reviewed 
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/LuscasLeo" rel="noopener" target="_blank" title="LuscasLeo on GitHub">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
<a class="md-social__link" href="https://buymeacoffee.com/luscasleo" rel="noopener" target="_blank" title="Buy Me a Coffee">
<svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M152-16c-13.3 0-24 10.7-24 24 0 38.9 23.4 59.4 39.1 73.1l1.1 1C184.5 96.4 192 103.9 192 120c0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C183.5 31.7 176 24.1 176 8c0-13.3-10.7-24-24-24M96 192c-17.7 0-32 14.3-32 32v192c0 53 43 96 96 96h192c41.8 0 77.4-26.7 90.5-64h5.5c70.7 0 128-57.3 128-128s-57.3-128-128-128zm352 192V256c35.3 0 64 28.7 64 64s-28.7 64-64 64M288 8c0-13.3-10.7-24-24-24S240-5.3 240 8c0 38.9 23.4 59.4 39.1 73.1l1.1 1C296.5 96.4 304 103.9 304 120c0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C295.5 31.7 288 24.1 288 8"></path></svg>
</a>
<a class="md-social__link" href="https://twitter.com/luscasleo_dev" rel="noopener" target="_blank" title="LuscasLeo on Twitter">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"></path></svg>
</a>
<a class="md-social__link" href="https://bsky.app/profile/luscasleo.dev" rel="noopener" target="_blank" title="LuscasLeo on Bluesky">
<svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M407.8 294.7c-3.3-.4-6.7-.8-10-1.3 3.4.4 6.7.9 10 1.3M288 227.1c-26.1-50.7-97.1-145.2-163.1-191.8C61.6-9.4 37.5-1.7 21.6 5.5 3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7 3.3-.5 6.6-.9 10-1.4-3.3.5-6.6 1-10 1.4-93.9 14-177.3 48.2-67.9 169.9C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4 102.4-103.4 28.1-156-65.8-169.9-3.3-.4-6.7-.8-10-1.3 3.4.4 6.7.9 10 1.3 64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
window.mermaidConfig = {default: {
    startOnLoad: false
}};</script></body>
</html>